Function AdvScreen::transparencySelect(Reference this, Integer trans, Integer fFlush)
	PUSH_OBJ  5
	GET_FIELD screenEffect
	PUSH_VAL Integer 0i
	!=
	JUMP_OK _l_9
	PUSH_VAR fFlush
	PUSH_VAL Integer -1i
	POP =
	NOP
@_l_9:
	INIT_LOCAL Integer i
	PUSH_VAL Integer 0i
	POP =
	PUSH_VAR fFlush
	PUSH_VAL Integer 0i
	==
	JUMP_OK _l_39
@_l_16:
	PUSH_VAR i
	PUSH_FIELD selectItem
	CALL_METHOD GetLength
	<=
	JUMP_OK _l_38
	PUSH_FIELD sprSelect
	PUSH_VAR i
	GET_FIELD_BY_OFFSET
	PUSH_VAR trans
	CALL_METHOD SetBlendingEnvelope
	NOP
	PUSH_FIELD sprSelect
	PUSH_VAR i
	GET_FIELD_BY_OFFSET
	PUSH_VAL Integer 300i
	CALL_METHOD BeginActivation
	NOP
	PUSH_VAR i
	PUSH_VAL Integer 1i
	POP +=
	NOP
	JUMP _l_16
@_l_38:
	JUMP _l_55
@_l_39:
	PUSH_VAR i
	PUSH_FIELD selectItem
	CALL_METHOD GetLength
	<=
	JUMP_OK _l_55
	PUSH_FIELD sprSelect
	PUSH_VAR i
	GET_FIELD_BY_OFFSET
	PUSH_VAR trans
	CALL_METHOD SetTransparency
	NOP
	PUSH_VAR i
	PUSH_VAL Integer 1i
	POP +=
	NOP
	JUMP _l_39
@_l_55:
	PUSH_VAL Integer 0i
	Return
EndFunc

