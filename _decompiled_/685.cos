Function SaveSprite(Reference spr, Reference filename)
	PUSH_VAR spr
	CALL_METHOD GetType
	PUSH_VAL String "Sprite"
	!=
	JUMP_OK _l_7
	PUSH_VAL Integer 0i
	Return
@_l_7:
	INIT_LOCAL struct File file
	PUSH_VAR file
	PUSH_VAR filename
	PUSH_VAL Integer 5i
	CALL_METHOD Open
	NOP
	PUSH_VAR file
	PUSH_VAR spr
	CALL_METHOD SaveThumbnailImage
	NOP
	PUSH_VAR file
	CALL_METHOD Close
	NOP
	PUSH_VAL Integer 0i
	Return
	@@Initialize

	Return this
EndFunc

