Function AdvScreen::addjustMessage_talk(Reference mess)
	String temp
	String char
	cha := "／"
	Integer fTop
	fTop := -1
	Integer num
	num := 28i
	Integer index
	index := 0i
    While (mess.Char(index) == 10)
        index += 1
    EndWhile
    temp := mess.Middle(0, index)
	Integer length
	length := mess.GetLength() - index
    While (index <= mess.GetLength())
        Integer i
        i := 0
        Integer fRet
        fRet := 0
        Integer num_
        If (fTop == -1)
            num_ := num
        Else
            num_ := num - 1
        EndIf
        While (i <= num_)
            If (mess.Char(index + i) == char.Char(0))
                If (fTop == -1)
                    temp += mess.Middle(index, i + 1)
                Else
                    temp += mess.Middle(index, i + 1) + " "
                EndIf
                fRet := -1
                i += 1
                Break
            Else
                i += 1
            EndIf
        EndWhile
        If (i == num_) && (fRet == 0)
            Integer fKinsoku
            fKinsoku := 0
            Integer iKin
            iKin := 0
            While (iKin <= {PUSH_OBJ  11}.GetLength()) ; //TODO
                If (mess.Char(index + i) == {PUSH_OBJ  11}.Char(iKin))    ; //TODO
                    fKinsoku := -1
                    Break
                EndIf
                iKin += 1
            EndWhile
            If (fTop == -1)
                if (fKinsoku == 0)
                    temp += mess.Middle(index, i) + "\n"
                Else
                    temp += mess.Middle(index, i + 1) + "\n"
                    i += 1
                EndIf
            Else
                If (fKinsoku == 0)
                    temp += mess.Middle(index, i) + " \n"
                Else
                    temp += mess.Middle(index, i + 1) + " \n"
                    i += 1
            EndIf
        EndIf
        If (fTop == -1)
            fTop := 0
        EndIf
        index += i
    EndWhile
    temp = temp.Replace("／", "\n")
    mess = temp
EndFunc

